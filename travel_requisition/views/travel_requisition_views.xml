<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Travel requisition tab view in my expense form -->
    <record id="view_travel_requisition_expense_new" model="ir.ui.view">
        <field name="name">view.travel.requisition.expense.new</field>
        <field name="model">hr.expense</field>
        <field name="inherit_id" ref="hr_expense.hr_expense_view_form"/>
        <field name="arch" type="xml">

            <xpath expr="//form/sheet/div/field[@name='description']" position="before">
                <notebook attrs="{'invisible': [('payment_mode', '!=', 'company_account')]}">
                    <page string="Travel Requisitions">
                        <group>
                            <group>
                                <field name="name_new"/>
                                <field name="emp_code"/>
                            </group>
                            <group>
                                <field name="band"/>
                                <field name="mobile"/>
                            </group>
                        </group>

                        <group>
                            <group>
                                <field name="department"/>
                                <field name="designation"/>
                            </group>
                            <group>
                                <field name="company"/>
                            </group>
                        </group>

                        <group>
                            <group>
                                <field name="purpose_of_visit"/>
                            </group>
                            <group>
                                <field name="approved_by"/>
                            </group>
                        </group>

                        <separator string="Travel Details" style="color:#7d435d; font-size:18px; font-weight:bold"/>
                        <group>
                            <field name="travel_detail_line_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="date"/>
                                    <field name="from_dates"/>
                                    <field name="to_dates"/>
                                    <field name="departs_time"/>
                                    <field name="arrives_time"/>
                                    <field name="mode_and_class"/>
                                </tree>
                            </field>
                        </group>

                        <group>
                            <group>
                                <separator string="In Case of Train Booking"
                                           style="color:#7d435d; font-size:18px; font-weight:bold"/>
                                <field name="pan_dl_no"/>
                                <field name="age"/>
                            </group>
                            <group>
                                <separator string="In Case of International Travel"
                                           style="color:#7d435d; font-size:16px; font-weight:bold"/>
                                <field name="pass_name"/>
                                <field name="pass_no"/>
                                <field name="date_place"/>
                            </group>
                        </group>

                        <separator string="Stay Details" style="color:#7d435d; font-size:16px; font-weight:bold"/>
                        <group>
                            <field name="stay_detail_line_ids" nolabel="1">
                                <tree editable="bottom">
                                    <field name="name_line"/>
                                    <field name="band_line"/>
                                    <field name="hotel_guest_line"/>
                                    <field name="location_line"/>
                                    <field name="check_in_date"/>
                                    <field name="check_out_date"/>
                                </tree>
                            </field>
                        </group>
                    </page>
                </notebook>
            </xpath>

            <!-- paid by field readonly -->
            <xpath expr="//field[@name='payment_mode']" position="attributes">
                <attribute name="readonly">1</attribute>
                <attribute name="force_save">1</attribute>
            </xpath>
        </field>
    </record>

    <!-- travel_requisition field vie in expense product -->
    <record id="view_expense_product_inherit" model="ir.ui.view">
        <field name="name">view.expense.product.inherit</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="hr_expense.product_product_expense_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='supplier_taxes_id']" position="after">
                <field name="travel_requisition"/>
            </xpath>
        </field>
    </record>

    <!-- HR employee for -->
    <record id="view_hr_employee_inherit" model="ir.ui.view">
        <field name="name">view.hr.employee.inherit</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='mobile_phone']" position="before">
                <field name="emp_code"/>
            </xpath>
        </field>
    </record>

    <!-- changing default domain of My Expenses menu items action in hr.expenses -->
    <record id="hr_expense.hr_expense_actions_my_unsubmitted" model="ir.actions.act_window">
        <field name="domain">[('payment_mode','=','own_account')]</field>
    </record>

    <!-- Menu action for My Travel Requisition to Report -->
    <record id="action_travel_requisition_to_report" model="ir.actions.act_window">
        <field name="name">Travel Requisition to Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.expense</field>
        <field name="context">{'payment_mode':'company_account'}</field>
        <field name="domain">[('payment_mode','=','company_account')]</field>
        <field name="view_mode">tree,form,kanban,graph,pivot</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first emp!
            </p>
        </field>
    </record>

    <!-- Menu action for All Travel Requisition -->
    <record id="action_all_travel_requisition" model="ir.actions.act_window">
        <field name="name">All Travel Requisition</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.expense</field>
        <field name="context">{'payment_mode':'company_account'}</field>
        <field name="domain">[('payment_mode','=','company_account')]</field>
        <field name="view_mode">tree,form,kanban,graph,pivot</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first emp!
            </p>
        </field>
    </record>

    <!-- Menu action for Travel Requisition Report -->
    <record id="action_travel_requisition_report" model="ir.actions.act_window">
        <field name="name">Travel Requisition Report</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.expense.sheet</field>
        <field name="context">{'payment_mode':'company_account'}</field>
        <field name="domain">[('payment_mode','=','company_account')]</field>
        <field name="view_mode">tree,form,kanban,graph,pivot</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first emp!
            </p>
        </field>
    </record>

    <!-- root menu in expense -->
    <menuitem id="menu_travel_requisition_root"
              name="Travel Requisition"
              parent="hr_expense.menu_hr_expense_root"
              sequence="1"/>

    <!-- Menu item for My Travel Requisition to Report -->
    <menuitem id="menu_travel_requisition_to_report"
              name="Travel Requisition to Report"
              parent="menu_travel_requisition_root"
              sequence="1"
              action="action_travel_requisition_to_report"/>

    <!-- Menu item for All My Travel Requisition-->
    <menuitem id="menu_all_travel_requisition"
              name="All Travel Requisition"
              parent="menu_travel_requisition_root"
              sequence="2"
              action="action_all_travel_requisition"/>

    <!-- Menu item for My Travel Requisition Report -->
    <menuitem id="menu_travel_requisition_report"
              name="My Travel Requisition Report"
              parent="menu_travel_requisition_root"
              sequence="3"
              action="action_travel_requisition_report"/>
</odoo>